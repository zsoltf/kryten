#!/usr/bin/env ruby

require "bundler/setup"
require "kryten"
require "pry"

include Kryten

class Work
  include BackgroundTask
end

class Work
  include ThreadedTask
  def run
    work = rand(5)+1;
    log "working for #{work}"
    sleep work
    log "done working"
  end
end

tasks = [ Work.new('w3sub1'), Work.new('w3sub2') ]

w1 = Work.new('work1')
w2 = Work.new('work2')
w3 = Work.new('work3')
w3.workers do
  tasks
end

v = ThreadedGroup.workers do
  [w1,w2,w3]
end

binding.pry
#w3.start
